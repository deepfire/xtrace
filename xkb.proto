EXTENSION "XKEYBOARD" Xkb
USE core

REQUESTS
UseExtension RESPONDS /* 0 */
# TODO:
SelectEvents UNSUPPORTED /* 1 */
Unknown UNSUPPORTED
Bell /* 3 */
GetState RESPONDS UNSUPPORTED /* 4 */
LatchLockState UNSUPPORTED /* 5 */
GetControls RESPONDS UNSUPPORTED /* 6 */
SetControls UNSUPPORTED /* 7 */
GetMap RESPONDS UNSUPPORTED /* 8 */
SetMap UNSUPPORTED /* 9 */
GetCompatMap RESPONDS UNSUPPORTED /* 10 */
SetCompatMap UNSUPPORTED /* 11 */
GetIndicatorState RESPONDS UNSUPPORTED /* 12 */
GetIndicatorMap RESPONDS UNSUPPORTED /* 13 */
SetIndicatorMap UNSUPPORTED /* 14 */
GetNamedIndicator RESPONDS UNSUPPORTED /* 15 */
SetNamedIndicator UNSUPPORTED /* 16 */
GetNames RESPONDS UNSUPPORTED /* 17 */
SetNames UNSUPPORTED /* 18 */
GetGeometry RESPONDS UNSUPPORTED /* 19 */
SetGeometry UNSUPPORTED /* 20 */
PerClientFlags UNSUPPORTED /* 21 */
ListComponents RESPONDS UNSUPPORTED /* 22 */
GetKbdByName RESPONDS UNSUPPORTED /* 23 */
GetDeviceInfo RESPONDS UNSUPPORTED /* 24 */
SetDeviceInfo UNSUPPORTED /* 25 */
END

EVENTS
XkbEvent
END

ERRORS
# this also packs the type in subvalues,
# to support this we need support of parsing error packets, too
"Keyboard"
END

REQUEST UseExtension
 4	major	UINT16
 6	minor	UINT16
END
RESPONSE UseExtension
 8	major	UINT16
10	minor	UINT16
END

CONSTANTS DEVICESPEC
0x100 UseCoreKbd
0x200 UseCorePtr
END
TYPE DEVICESPEC UINT16 constants DEVICESPEC

CONSTANTS BELLCLASSSPEC
0 KbdFeedback
5 LedFeedback
0x300 DefaultXI
# AllXI ???
END
TYPE BELLCLASSSPEC ENUM16 BELLCLASSSPEC

CONSTANTS IDSPEC
0x400 DfltXIId
END
TYPE IDSPEC UINT16 constants IDSPEC

REQUEST Bell
 4 deviceSpec DEVICESPEC
 6 bellClass BELLCLASSSPEC
 8 bellID IDSPEC
10 percent INT8
11 forceSound BOOL
12 eventOnly BOOL
14 pitch INT16
16 duration INT16
20 name ATOM
24 window WINDOW
END

EVENT XkbEvent
# all events packaged into one? WTF?
 1	type	UINT8
 4	time	TIMESTAMP
 8	device	CARD8
# TODO:
 9	not-yet-supported	LISTofCARD8
END

EOF
